Variation Tool
========

The variation tool makes use of the road-generation library and generates several variations of an opendrive scenario that is provided by a template file. The main goal was to create an easy to use syntax while allowing the user to specify constraints for the output scenarios.

Installation
--------
You can run the code from the `variation subfolder`, however, the variation tool can be installed system wide by using the install script in the root directory.

```bash
	install-variation.sh
```
Alternatively you can install the module directly from the wheel file.

	$pip3 install variation/wheel/roadvariation-0.1-py3-none-any.whl

Usage
--------
The tool can be accessed via the command line:

```bash
	variation -fname <filename> 
```
__On Windows:__ 

	$python -m variation -fname <filename> 
	
A variety of parameters and flaggs can be specified:

- `-fname ` `<input file path>` input template file
- `-n` `<integer>` number of generated outputs
- `-o` `<string>` output file name
- `-e` `<file path>` generate an example template file to location 
- `-h --help` display the help message
- `-k` keep the inetmediate `.xml` output files
- `-s` run the roadgen lib in silent mode	


Template File
---------------
The variation tool takes a template file as an input. The template file format extends the logical road network description of the road-generation library. Additionally to the input road network description, `<vars> ... </vars>` tags declare variables that will be drawn from a random distribution. These variables can be referenced in the logical description of the scenario and therefore enable variations  of the same network.

```xml
<vars>
	<var id="transDepVar" type="lindep" dp="depVar/2" /> 
	<var id="depVar" type="lindep" dp="uniformVar*0.3 + normalVar" />        
	<var id="uniformVar" type="uniform" min="100" max="150" />        
	<var id="normalVar" type="normal" mu="1.57" sd="0.12" />     
</vars>
```
These variables can then be referenced by their name, surrounded by `${...} `. 
```xml
<referenceLine>
	<line length="${uniformVar}"/>
</referenceLine>
```
An example  template file can be generated by using the `-e` flag.


Variable Types
-----------------
For each variable we need to specify an `id` and `type`attribute. There are three types of variables that require different attributes:

- `normal`  distribution with mean value `mu` and standard deviation `sd`.
- `uniform`  distribution with a `min` and a `max` value.
- `lindep`  defines a variable that is linear dependent on other variables or constants with  a dependency  `dp` in string form.







	
