stages:
  - build
  - unitCases
  
docker-build:
  image: docker:latest
  stage: build
  services: dind
  before_script:
  -docker login -u "$CI_REGISTRY_USER" -p "$CI_REGISTRY_PASSWORD" $CI_REGISTRY
  

basicBuildCase:
  stage: build
  tags:
    - docker
  script: 
    - cmake . 
    - make
  artifacts:
      paths:
        - road-generation

unitCase1:
  stage: unitCases
  script:
    - ./road-generation test/test1.xml
    - cat test/test1.xml
    - cmp --silent test/test1.xodr test/gt/test1.xodr
  
unitCase2:
  stage: unitCases
  script:
    - ./road-generation test/test2.xml
    - cat test/test2.xml
    - cmp test/test2.xodr test/gt/test2.xodr

unitCase3:
  stage: unitCases
  script:
    - ./road-generation test/test3.xml
    - cat test/test3.xml
    - cmp test/test3.xodr test/gt/test3.xodr
    
unitCase5:
  stage: unitCases
  script:
    - ./road-generation test/test5.xml
    - cat test/test5.xml
    - cmp --silent test/test5.xodr test/gt/test5.xodr

unitCase6:
  stage: unitCases
  script:
    - ./road-generation test/test6.xml
    - cat test/test6.xml
    - cmp test/test6.xodr test/gt/test6.xodr

unitCase7:
  stage: unitCases
  script:
    - ./road-generation test/test7.xml
    - cat test/test7.xml
    - cmp test/test7.xodr test/gt/test7.xodr

unitCase8:
  stage: unitCases
  script:
    - ./road-generation test/test8.xml
    - cat test/test8.xml
    - cmp test/test8.xodr test/gt/test8.xodr

unitCase9:
  stage: unitCases
  script:
    - ./road-generation test/test9.xml
    - cat test/test9.xml
    - cmp test/test9.xodr test/gt/test9.xodr
